<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Dodge Hell</title>
    <style>
        body {
            margin: 0;
            background: black;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            overflow: hidden;
        }
        canvas {
            background: #111;
            border: 3px solid #444;
        }
    </style>
</head>
<body>
    <canvas id="game" width="400" height="600"></canvas>

    <script>
        const canvas = document.getElementById("game");
        const ctx = canvas.getContext("2d");

        // çŽ©å®¶ï¼ˆç”¨ emojiï¼‰
        const player = {
            x: 200,
            y: 500,
            size: 40,
            speed: 6
        };

        // çŽ©å®¶æŽ§åˆ¶
        let left = false, right = false;
        document.addEventListener("keydown", e => {
            if (e.key === "ArrowLeft") left = true;
            if (e.key === "ArrowRight") right = true;
        });
        document.addEventListener("keyup", e => {
            if (e.key === "ArrowLeft") left = false;
            if (e.key === "ArrowRight") right = false;
        });

        // éšœç¤™ç‰©åœ–ç‰‡
        const obstacleImg = new Image();
        obstacleImg.src = "obstacle.png";

        let obstacles = [];
        let gameOver = false;
        let score = 0;

        function spawnObstacle() {
            const w = 60, h = 60;
            const x = Math.random() * (canvas.width - w);
            obstacles.push({
                x,
                y: -100,
                w,
                h,
                speed: 3 + Math.random() * 4
            });
        }

        setInterval(spawnObstacle, 900);

        function drawPlayer() {
            ctx.font = player.size + "px Arial";
            ctx.textAlign = "center";
            ctx.textBaseline = "middle";
            ctx.fillText("ðŸ‘¾", player.x, player.y);
        }

        function update() {
            if (left) player.x -= player.speed;
            if (right) player.x += player.speed;
            player.x = Math.max(20, Math.min(canvas.width - 20, player.x));

            obstacles.forEach(o => {
                o.y += o.speed;

                // ç¢°æ’žåˆ¤å®š
                if (
                    o.x < player.x + 20 &&
                    o.x + o.w > player.x - 20 &&
                    o.y < player.y + 20 &&
                    o.y + o.h > player.y - 20
                ) {
                    gameOver = true;
                }
            });

            obstacles = obstacles.filter(o => o.y < canvas.height + 100);
            score++;
        }

        function draw() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            // çŽ©å®¶
            drawPlayer();

            // éšœç¤™ç‰©
            obstacles.forEach(o => {
                ctx.drawImage(obstacleImg, o.x, o.y, o.w, o.h);
            });

            // åˆ†æ•¸
            ctx.fillStyle = "white";
            ctx.font = "20px Arial";
            ctx.fillText("Score: " + score, 70, 30);

            if (gameOver) {
                ctx.fillStyle = "red";
                ctx.font = "40px Arial";
                ctx.fillText("GAME OVER", canvas.width / 2, canvas.height / 2);
                return;
            }

            update();
            requestAnimationFrame(draw);
        }

        draw();
    </script>
</body>
</html>
